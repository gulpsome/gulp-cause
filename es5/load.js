'use strict';

exports.__esModule = true;
exports.default = load;

var _ramda = require('ramda');

var _ramda2 = _interopRequireDefault(_ramda);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function dataError(what) {
  throw new Error('Don\'t know how to convert \'' + what + '\' of type ' + _ramda2.default.type(what) + ' to a Map.');
}

function evenLength(a) {
  if (a.length % 2 === 0) return true;
}

function atom(a) {
  // Array-to-Map conversion, where a is a flat array of even length
  var m = new Map();
  if (evenLength(a) && a.length >= 2) {
    for (var i = 0; i < a.length; i = i + 2) {
      m.set(a[i], a[i + 1]);
    }
  }
  return m;
}

function load(what) {
  switch (_ramda2.default.type(what)) {
    case 'Map':
      return what;
    case 'Object':
      return new Map(_ramda2.default.toPairs(what));
    case 'Array':
      if (_ramda2.default.type(what[0]) === 'Array' && what[0].length === 2) return new Map(what);else if (evenLength(what)) return atom(what);else dataError(what);
      break;
    default:
      dataError(what);
  }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL2xvYWQuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7O2tCQXFCd0IsSUFBSTs7Ozs7Ozs7QUFuQjVCLFNBQVMsU0FBUyxDQUFFLElBQUksRUFBRTtBQUN4QixRQUFNLElBQUksS0FBSyxtQ0FBK0IsSUFBSSxtQkFBYSxnQkFBRSxJQUFJLENBQUMsSUFBSSxDQUFDLGdCQUFhLENBQUE7Q0FDekY7O0FBRUQsU0FBUyxVQUFVLENBQUUsQ0FBQyxFQUFFO0FBQ3RCLE1BQUksQ0FBQyxDQUFDLE1BQU0sR0FBRyxDQUFDLEtBQUssQ0FBQyxFQUFFLE9BQU8sSUFBSSxDQUFBO0NBQ3BDOztBQUVELFNBQVMsSUFBSSxDQUFFLENBQUMsRUFBRTs7QUFFaEIsTUFBSSxDQUFDLEdBQUcsSUFBSSxHQUFHLEVBQUUsQ0FBQTtBQUNqQixNQUFJLFVBQVUsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsTUFBTSxJQUFJLENBQUMsRUFBRTtBQUNsQyxTQUFLLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsQ0FBQyxDQUFDLE1BQU0sRUFBRSxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsRUFBRTtBQUN2QyxPQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUE7S0FDdEI7R0FDRjtBQUNELFNBQU8sQ0FBQyxDQUFBO0NBQ1Q7O0FBRWMsU0FBUyxJQUFJLENBQUUsSUFBSSxFQUFFO0FBQ2xDLFVBQVEsZ0JBQUUsSUFBSSxDQUFDLElBQUksQ0FBQztBQUNsQixTQUFLLEtBQUs7QUFDUixhQUFPLElBQUksQ0FBQTtBQUFBLEFBQ2IsU0FBSyxRQUFRO0FBQ1gsYUFBTyxJQUFJLEdBQUcsQ0FBQyxnQkFBRSxPQUFPLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQTtBQUFBLEFBQ2pDLFNBQUssT0FBTztBQUNWLFVBQUksZ0JBQUUsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxLQUFLLE9BQU8sSUFBSSxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsTUFBTSxLQUFLLENBQUMsRUFBRSxPQUFPLElBQUksR0FBRyxDQUFDLElBQUksQ0FBQyxDQUFBLEtBQ3hFLElBQUksVUFBVSxDQUFDLElBQUksQ0FBQyxFQUFFLE9BQU8sSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFBLEtBQ3ZDLFNBQVMsQ0FBQyxJQUFJLENBQUMsQ0FBQTtBQUNwQixZQUFLO0FBQUEsQUFDUDtBQUNFLGVBQVMsQ0FBQyxJQUFJLENBQUMsQ0FBQTtBQUFBLEdBQ2xCO0NBQ0YiLCJmaWxlIjoibG9hZC5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBSIGZyb20gJ3JhbWRhJ1xuXG5mdW5jdGlvbiBkYXRhRXJyb3IgKHdoYXQpIHtcbiAgdGhyb3cgbmV3IEVycm9yKGBEb24ndCBrbm93IGhvdyB0byBjb252ZXJ0ICcke3doYXR9JyBvZiB0eXBlICR7Ui50eXBlKHdoYXQpfSB0byBhIE1hcC5gKVxufVxuXG5mdW5jdGlvbiBldmVuTGVuZ3RoIChhKSB7XG4gIGlmIChhLmxlbmd0aCAlIDIgPT09IDApIHJldHVybiB0cnVlXG59XG5cbmZ1bmN0aW9uIGF0b20gKGEpIHtcbiAgLy8gQXJyYXktdG8tTWFwIGNvbnZlcnNpb24sIHdoZXJlIGEgaXMgYSBmbGF0IGFycmF5IG9mIGV2ZW4gbGVuZ3RoXG4gIGxldCBtID0gbmV3IE1hcCgpXG4gIGlmIChldmVuTGVuZ3RoKGEpICYmIGEubGVuZ3RoID49IDIpIHtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGEubGVuZ3RoOyBpID0gaSArIDIpIHtcbiAgICAgIG0uc2V0KGFbaV0sIGFbaSArIDFdKVxuICAgIH1cbiAgfVxuICByZXR1cm4gbVxufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBsb2FkICh3aGF0KSB7XG4gIHN3aXRjaCAoUi50eXBlKHdoYXQpKSB7XG4gICAgY2FzZSAnTWFwJzpcbiAgICAgIHJldHVybiB3aGF0XG4gICAgY2FzZSAnT2JqZWN0JzpcbiAgICAgIHJldHVybiBuZXcgTWFwKFIudG9QYWlycyh3aGF0KSlcbiAgICBjYXNlICdBcnJheSc6XG4gICAgICBpZiAoUi50eXBlKHdoYXRbMF0pID09PSAnQXJyYXknICYmIHdoYXRbMF0ubGVuZ3RoID09PSAyKSByZXR1cm4gbmV3IE1hcCh3aGF0KVxuICAgICAgZWxzZSBpZiAoZXZlbkxlbmd0aCh3aGF0KSkgcmV0dXJuIGF0b20od2hhdClcbiAgICAgIGVsc2UgZGF0YUVycm9yKHdoYXQpXG4gICAgICBicmVha1xuICAgIGRlZmF1bHQ6XG4gICAgICBkYXRhRXJyb3Iod2hhdClcbiAgfVxufVxuIl19